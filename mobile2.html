<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Link Shopee Pagination Highlight</title>
<style>
  body { font-family: Arial, sans-serif; margin:15px; max-width:700px; margin-left:auto; margin-right:auto; }
  h2,h3 { font-size:1.2rem; margin-bottom:8px; }
  .textarea-wrapper { position:relative; width:100%; }
  #highlight { 
    position:absolute; top:0; left:0; right:0; bottom:0; 
    pointer-events:none; white-space:pre-wrap; 
    padding:8px; border-radius:6px; border:1px solid #ccc; 
    font-family:inherit; font-size:1rem; color:transparent; 
  }
  #highlight span { color:black; }
  #highlight .empty { background-color:rgba(255,0,0,0.2); }
  #highlight .hash { background-color:rgba(255,165,0,0.2); }
  textarea { 
    position:relative; width:100%; height:150px; box-sizing:border-box; font-size:1rem; 
    padding:8px; border-radius:6px; border:1px solid #ccc; background:none; 
    color:black; z-index:1; position:relative; 
  }
  #output a { display:block; margin-bottom:6px; color:#0066cc; text-decoration:none; word-wrap:break-word; }
  #output a:hover { text-decoration:underline; }
</style>
</head>
<body>

<h2>Masukkan Link Shopee</h2>
<div class="textarea-wrapper">
  <div id="highlight"></div>
  <textarea id="inputLinks" placeholder="Masukkan ribuan link Shopee, satu per baris..."></textarea>
</div>

<div id="output"></div>

<script>
const inputLinksEl = document.getElementById('inputLinks');
const highlightEl = document.getElementById('highlight');
const outputEl = document.getElementById('output');

function updateHighlight(){
  const lines = inputLinksEl.value.split('\n');
  const highlighted = lines.map(line=>{
    if(line.trim() === '') return '<span class="empty"> </span>';
    if(line.trim() === '###') return '<span class="hash">###</span>';
    return '<span>'+line+'</span>';
  }).join('\n');
  highlightEl.innerHTML = highlighted;
}

function updateOutput(){
  const validLinks = inputLinksEl.value.split('\n')
    .map(l=>l.trim())
    .filter(l=>l && l!=='###' && /\/product\/\d+\/\d+/.test(l));
  outputEl.innerHTML = validLinks.map(l=>`<a href="${l}" target="_blank">${l}</a>`).join('');
}

// Event input
inputLinksEl.addEventListener('input',()=>{
  updateHighlight();
  updateOutput();
});

// Sinkron scroll
inputLinksEl.addEventListener('scroll',()=>{
  highlightEl.scrollTop = inputLinksEl.scrollTop;
});

updateHighlight();
updateOutput();
</script>

</body>
</html>
