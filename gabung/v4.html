<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Import Universal Data MadGazan</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    margin: 15px; 
    max-width: 600px; 
    margin-inline:auto; 
    background-color:#fffef9; 
  }
  h1,h2,h3 { color:#b36b00; text-align:center; }
  h1 { font-size:1.6rem; margin-bottom:5px; }
  .backup-area { 
    padding:12px; 
    background:#fffbe6; 
    border-radius:8px; 
    border:1px solid #ffd42a; 
    text-align:center; 
  }
  .input-buttons { 
    display:flex; 
    gap:8px; 
    margin-top:6px; 
    flex-wrap:wrap; 
    justify-content:center; 
  }
  .input-buttons button, .input-buttons input[type="file"] { 
    flex:1; 
    padding:10px; 
    font-size:0.95rem; 
    cursor:pointer; 
    border:1px solid #ccc; 
    border-radius:6px; 
    background:#f5f5f5; 
  }
  .input-buttons button:hover { background:#eee; }
  .display-area button:hover { background:#d0f0f5; }
  #toast {
    position: fixed; bottom: 25px; right: 25px; 
    padding: 12px 20px; border-radius: 8px; 
    box-shadow: 0 2px 10px rgba(0,0,0,0.3); 
    opacity: 0; transform: translateY(20px); 
    transition: opacity 0.4s, transform 0.4s; 
    z-index: 9999; max-width: 320px; white-space: pre-line; 
    line-height:1.3; font-size:0.95rem; color:#fff;
  }
  pre { font-family: monospace; }
</style>
</head>
<body>

<h1>Import Universal Data</h1>

<div class="backup-area">
  <h3>üåê Import & Tampilkan Semua Data</h3>
  <div class="input-buttons">
    <input type="file" id="importFile" accept=".json">
    <button onclick="importUniversal()">Import Universal</button>
    <button onclick="showAllLocalStorageData()">Tampilkan Semua Data</button>
  </div>
</div>

<div class="display-area" style="margin-top:20px; text-align:center;">
  <pre id="localData" style="text-align:left; margin-top:12px; padding:10px; background:#f9f9f9; border:1px solid #ddd; border-radius:6px; max-height:300px; overflow:auto;"></pre>
</div>

<div id="toast"></div>

<script>
/* ===== Toast Notification ===== */
function showToast(message, type='info') {
  const toast = document.getElementById('toast');
  toast.textContent = message;
  let bgColor = '#333';
  if(type === 'success') bgColor = '#4CAF50';
  if(type === 'error') bgColor = '#f44336';
  if(type === 'warning') bgColor = '#b36b00';
  if(type === 'info') bgColor = '#2196F3';
  toast.style.background = bgColor;
  toast.style.opacity = '1';
  toast.style.transform = 'translateY(0)';
  setTimeout(() => {
    toast.style.opacity = '0';
    toast.style.transform = 'translateY(20px)';
  }, 4000);
}

/* ===== Import Universal ===== */
function importUniversal() {
  const fileInput = document.getElementById('importFile');
  const file = fileInput.files[0];
  if (!file) return showToast('‚ùå Pilih file JSON dulu.', 'error');
  const reader = new FileReader();
  reader.onload = e => {
    try {
      const data = JSON.parse(e.target.result);
      Object.keys(data).forEach(key => localStorage.setItem(key, data[key]));
      showToast('‚úÖ Data universal berhasil diimport.', 'success');
    } catch (err) {
      showToast('‚ùå File tidak valid: ' + err.message, 'error');
    }
  };
  reader.readAsText(file);
}

/* ===== Tampilkan Semua Data ===== */
function showAllLocalStorageData() {
  const display = document.getElementById('localData');
  const allData = {};
  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    allData[key] = localStorage.getItem(key);
  }
  display.textContent = Object.keys(allData).length
    ? JSON.stringify(allData, null, 2)
    : 'üì≠ Tidak ada data tersimpan di LocalStorage browser ini.';
  showToast('üåê Semua data LocalStorage berhasil ditampilkan.', 'info');
}
</script>

</body>
</html>